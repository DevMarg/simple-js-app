/*global $*/ let pokemonRepository=function(){let t=[];function e(t){return t.charAt(0).toUpperCase()+t.slice(1)}function n(e){'object'==typeof e&&'name'in e&&'detailsUrl'in e?t.push(e):console.error('Error: Invalid type.')}function o(){return t}function a(t){return $.ajax({url:t.detailsUrl,dataType:'json'}).then(function(e){t.imageUrl=e.sprites.front_default,t.height=e.height,t.types=e.types}).fail(function(t,e){console.error('Error',e)})}function i(t){a(t).then(function(){var n;let o,a,i,r,l;n=t,o=$('.modal-image'),a=$('.modal-name'),i=$('.modal-height'),r=$('.modal-abilities'),o.attr('src',n.imageUrl),o.attr('alt',n.name),a.text(e(n.name)),i.text('Height: '+n.height),l=n.types.map(t=>t.type.name).join(', '),r.text('Type: '+l),$('#pokemonModal').modal('show')})}function r(t){let n=$('.pokemon-list'),o=$('<li></li>'),r=$('<button>'+e(t.name)+'</button>');if(r.addClass('btn btn-lg pokemon-button'),t.imageUrl){let l=$('<img>');l.addClass('pokemon-image img-fluid'),l.attr('src',t.imageUrl),l.attr('alt',`Image of ${t.name}`),r.append(l)}else a(t).then(function(){let e=$('<img>');e.addClass('pokemon-image img-fluid'),e.attr('src',t.imageUrl),e.attr('alt',`Image of ${t.name}`),r.append(e)});o.append(r),n.append(o),r.on('click',function(){i(t)})}let l;return(l=$('#search-bar')).on('input',function(){let e=l.val().toLowerCase(),n=t.filter(t=>t.name.toLowerCase().startsWith(e)),o=$('.row');o.empty(),0===n.length?o.text(`





No results`):n.forEach(t=>{r(t)})}),{add:n,getAll:o,addListItem:r,loadList:function t(){return $.ajax({url:'https://pokeapi.co/api/v2/pokemon/?limit=150',dataType:'json'}).then(function(t){t.results.forEach(function(t){let e={name:t.name,detailsUrl:t.url};n(e),console.log(e)})}).fail(function(t,e){console.error('Error',e)})},loadDetails:a,showDetails:i}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(t){pokemonRepository.addListItem(t)})});